# ğŸ“‹ RocketBird å¿«é€Ÿå‚è€ƒå¡

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### è®¿é—®åº”ç”¨
```
H5 ä¼šå‘˜ç«¯: https://cloud1-4g2aaqb40446a63b-1390089965.tcloudbaseapp.com
ç®¡ç†åå°: https://cloud1-4g2aaqb40446a63b-1390089965.tcloudbaseapp.com/admin
```

### æµ‹è¯•è´¦å·
```
æ‰‹æœºå·: 13800000001-13800000005
å¯†ç : 123456
```

---

## ğŸ”§ é…ç½®äº‘å‡½æ•° HTTP è§¦å‘å™¨

### å¿«é€Ÿé…ç½®ï¼ˆ5åˆ†é’Ÿï¼‰

1. **æ‰“å¼€ TCB æ§åˆ¶å°**
   ```
   https://console.cloud.tencent.com/tcb
   â†’ ç¯å¢ƒ: cloud1-4g2aaqb40446a63b
   â†’ äº‘å‡½æ•° â†’ api
   ```

2. **æ·»åŠ  HTTP è§¦å‘å™¨**
   - ç‚¹å‡»ã€Œæ–°å»ºè§¦å‘å™¨ã€
   - ç±»å‹: **HTTP**
   - è¯·æ±‚æ–¹æ³•: âœ“GET âœ“POST âœ“PUT âœ“DELETE âœ“OPTIONS
   - è·¯å¾„: `/api`
   - ä¿å­˜

3. **è·å– API åœ°å€**
   - è§¦å‘å™¨ä¼šæ˜¾ç¤º: `https://service-xxx.sh.run.tcloudbase.com/release/api`
   - å¤åˆ¶æ­¤åœ°å€ä¾›åç»­ä½¿ç”¨

---

## ğŸ“ å®šæ—¶è§¦å‘å™¨é…ç½®

### æ¨èé…ç½®

| è§¦å‘å™¨ | Cron è¡¨è¾¾å¼ | ç”¨é€” |
|--------|-----------|------|
| æ¯æ—¥æ¸…ç† | `0 2 * * *` | æ¸…ç†è¿‡æœŸ Token |
| æ¯å°æ—¶ | `0 * * * *` | æ›´æ–°ç»Ÿè®¡ |
| æ¯å‘¨ä¸€ | `0 10 ? * MON` | å‘¨æŠ¥ç”Ÿæˆ |
| æ¯æœˆåˆ | `0 0 1 * *` | æœˆåº¦é‡ç½® |

è¯¦ç»†é…ç½®è§: `docs/TRIGGER_CONFIG.md`

---

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
RocketBird/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ member-h5/          # H5 ä¼šå‘˜ç«¯ (uni-app)
â”‚   â”œâ”€â”€ admin/              # ç®¡ç†åå° (React)
â”‚   â”œâ”€â”€ server/             # åç«¯ API (Express)
â”‚   â””â”€â”€ shared/             # å…±äº«ä»£ç  (Types)
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ DEPLOYMENT_COMPLETE.md
â”‚   â”œâ”€â”€ TRIGGER_CONFIG.md
â”‚   â””â”€â”€ deploy-tcb.md
â””â”€â”€ scripts/
    â””â”€â”€ deploy-tcb.sh       # ä¸€é”®éƒ¨ç½²è„šæœ¬
```

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### æ„å»º

```bash
# æ„å»ºæ‰€æœ‰
yarn build:all

# å•ç‹¬æ„å»º
yarn build:shared    # å…±äº«åº“
yarn build:h5        # H5
yarn build:admin     # ç®¡ç†åå°
yarn build:server    # åç«¯
```

### éƒ¨ç½²

```bash
# éƒ¨ç½²æ‰€æœ‰
bash scripts/deploy-tcb.sh -b all

# å•ç‹¬éƒ¨ç½²
bash scripts/deploy-tcb.sh -b h5       # H5
bash scripts/deploy-tcb.sh -b admin    # ç®¡ç†åå°
bash scripts/deploy-tcb.sh -b server   # åç«¯
```

### å¼€å‘

```bash
# å¯åŠ¨ H5 å¼€å‘æœåŠ¡å™¨
yarn workspace @rocketbird/member-h5 dev

# å¯åŠ¨ç®¡ç†åå°å¼€å‘æœåŠ¡å™¨
yarn workspace @rocketbird/admin dev

# å¯åŠ¨åç«¯ API å¼€å‘
yarn workspace @rocketbird/server dev
```

---

## ğŸ—„ï¸ æ•°æ®åº“

### TCB æ–‡æ¡£å‹æ•°æ®åº“

| é›†åˆå | è¯´æ˜ |
|--------|------|
| `users` | ç”¨æˆ·è¡¨ |
| `members` | ä¼šå‘˜æ‰©å±•ä¿¡æ¯ |
| `points_records` | ç§¯åˆ†è®°å½• |
| `levels` | ç­‰çº§é…ç½® |
| `benefits` | ä¼˜æƒ åˆ¸ |
| `checkin_records` | ç­¾åˆ°è®°å½• |
| `meals` | å¥—é¤ä¿¡æ¯ |
| `referral_records` | æ¨èè®°å½• |
| `feedback` | åé¦ˆè¡¨ |

### æŸ¥çœ‹æ•°æ®

```
TCB æ§åˆ¶å° â†’ æ•°æ®åº“ â†’ [é›†åˆå]
```

---

## ğŸ” å®‰å…¨å»ºè®®

### ç”Ÿäº§ç¯å¢ƒæ£€æŸ¥æ¸…å•

- [ ] ä¿®æ”¹ `.env` ä¸­çš„ `JWT_SECRET`
- [ ] é…ç½® TCB æ•°æ®åº“æƒé™ï¼ˆä»…æœåŠ¡ç«¯è®¿é—®ï¼‰
- [ ] å¯ç”¨ TCB å®‰å…¨è§„åˆ™
- [ ] é…ç½®è‡ªå®šä¹‰åŸŸåï¼ˆHTTPSï¼‰
- [ ] å¯ç”¨ API é€Ÿç‡é™åˆ¶
- [ ] å®šæœŸå¤‡ä»½æ•°æ®
- [ ] ç›‘æ§äº‘å‡½æ•°æ—¥å¿—

### åŸŸåé…ç½®

1. TCB æ§åˆ¶å° â†’ é™æ€ç½‘ç«™æ‰˜ç®¡ â†’ è®¾ç½®
2. æ·»åŠ å·²å¤‡æ¡ˆçš„åŸŸå
3. é…ç½® CNAME è®°å½•
4. ç­‰å¾… DNS ç”Ÿæ•ˆï¼ˆé€šå¸¸ 2-24 å°æ—¶ï¼‰

---

## ğŸ“Š API æ¥å£ä¸€è§ˆ

### è®¤è¯

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| POST | `/api/auth/password-login` | å¯†ç ç™»å½• |
| GET | `/api/auth/profile` | è·å–ä¸ªäººä¿¡æ¯ |
| PUT | `/api/auth/profile` | æ›´æ–°ä¸ªäººä¿¡æ¯ |

### ä¼šå‘˜

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/level` | è·å–ç­‰çº§ |
| GET | `/api/points` | è·å–ç§¯åˆ† |
| GET | `/api/checkin` | ç­¾åˆ°è®°å½• |
| POST | `/api/checkin` | ç­¾åˆ° |
| GET | `/api/benefits` | ä¼˜æƒ åˆ¸åˆ—è¡¨ |

### ç®¡ç†åå°

| æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|
| GET | `/api/admin/dashboard` | ä»ªè¡¨æ¿ |
| GET | `/api/admin/users` | ä¼šå‘˜åˆ—è¡¨ |
| PUT | `/api/admin/users/:id` | æ›´æ–°ä¼šå‘˜ |

å®Œæ•´ API æ–‡æ¡£è§: `packages/server/src/routes/`

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: ç™»å½•å¤±è´¥

```
ç—‡çŠ¶: API è¿”å› 404 æˆ– 500
è§£å†³:
1. æ£€æŸ¥äº‘å‡½æ•°æ˜¯å¦éƒ¨ç½²æˆåŠŸ
   â†’ TCB æ§åˆ¶å° > äº‘å‡½æ•° > api > æ—¥å¿—
2. ç¡®è®¤ HTTP è§¦å‘å™¨å·²é…ç½®
3. æ£€æŸ¥ .env ç¯å¢ƒå˜é‡
4. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜é‡è¯•
```

### é—®é¢˜ 2: é¡µé¢æ˜¾ç¤ºç©ºç™½

```
ç—‡çŠ¶: H5 æ‰“å¼€æ˜¾ç¤ºç©ºç™½é¡µ
è§£å†³:
1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)
2. Console æ ‡ç­¾æŸ¥çœ‹é”™è¯¯ä¿¡æ¯
3. Network æ ‡ç­¾æ£€æŸ¥èµ„æºåŠ è½½
4. å¦‚æ— æ³•åŠ è½½ /index.htmlï¼Œæ£€æŸ¥:
   TCB æ§åˆ¶å° > é™æ€ç½‘ç«™æ‰˜ç®¡ > è®¾ç½® > é”™è¯¯é¡µé¢ = /index.html
```

### é—®é¢˜ 3: æ•°æ®åº“æ— æ³•è¿æ¥

```
ç—‡çŠ¶: API è¿”å› 500ï¼Œæç¤ºæ•°æ®åº“é”™è¯¯
è§£å†³:
1. æŸ¥çœ‹äº‘å‡½æ•°æ—¥å¿—ä¸­çš„å…·ä½“é”™è¯¯
2. ç¡®è®¤ TCB ç¯å¢ƒ ID æ­£ç¡®
3. æ£€æŸ¥é›†åˆæ˜¯å¦å­˜åœ¨ï¼ˆé¦–æ¬¡ä½¿ç”¨ä¼šè‡ªåŠ¨åˆ›å»ºï¼‰
4. éªŒè¯ TCB å‡­è¯æ˜¯å¦æœ‰æ•ˆ
```

---

## ğŸ“ è·å–å¸®åŠ©

### æŸ¥çœ‹æ—¥å¿—

```bash
# äº‘å‡½æ•°æ—¥å¿—
tcb fn log api --limit 100

# æˆ–åœ¨æ§åˆ¶å°æŸ¥çœ‹
# TCB æ§åˆ¶å° > äº‘å‡½æ•° > api > æ—¥å¿—
```

### æŸ¥çœ‹æ–‡æ¡£

- éƒ¨ç½²å®Œæ•´æŒ‡å—: `docs/DEPLOYMENT_COMPLETE.md`
- è§¦å‘å™¨é…ç½®: `docs/TRIGGER_CONFIG.md`
- TCB å®˜æ–¹æ–‡æ¡£: https://cloud.tencent.com/document/product/876
- uni-app æ–‡æ¡£: https://uniapp.dcloud.io/
- Express æ–‡æ¡£: https://expressjs.com/

### å¸¸ç”¨é“¾æ¥

| èµ„æº | é“¾æ¥ |
|------|------|
| TCB æ§åˆ¶å° | https://console.cloud.tencent.com/tcb |
| GitHub ä»“åº“ | https://github.com/Angus1976/jianshen01 |
| é¡¹ç›®æ–‡æ¡£ | `/docs` ç›®å½• |

---

## âœ¨ é¡¹ç›®ä¿¡æ¯

- **é¡¹ç›®å**: RocketBird
- **ç¯å¢ƒ ID**: cloud1-4g2aaqb40446a63b
- **éƒ¨ç½²æ—¶é—´**: 2025-12-04
- **æŠ€æœ¯æ ˆ**: Express + uni-app + React + TCB
- **æ•°æ®åº“**: TCB æ–‡æ¡£å‹æ•°æ®åº“
- **éƒ¨ç½²æ–¹å¼**: CloudBase Framework

---

**æœ€åæ›´æ–°**: 2025-12-04 | **çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª
