# ğŸ‰ RocketBird éƒ¨ç½²å®ŒæˆæŒ‡å—

## âœ… å·²å®Œæˆçš„éƒ¨ç½²

### å·²éƒ¨ç½²æœåŠ¡
| æœåŠ¡ | ç±»å‹ | è®¿é—®åœ°å€ | çŠ¶æ€ |
|------|------|---------|------|
| **H5 ä¼šå‘˜ç«¯** | é™æ€ç½‘ç«™ | https://cloud1-4g2aaqb40446a63b-1390089965.tcloudbaseapp.com | âœ… |
| **ç®¡ç†åå°** | é™æ€ç½‘ç«™ | https://cloud1-4g2aaqb40446a63b-1390089965.tcloudbaseapp.com/admin | âœ… |
| **åç«¯ API** | äº‘å‡½æ•° | å¾…æ‰‹åŠ¨é…ç½®è§¦å‘å™¨ | ğŸ”„ |
| **æ–‡æ¡£å‹æ•°æ®åº“** | TCB | è‡ªåŠ¨è¿æ¥ | âœ… |

---

## ğŸ”§ åç»­é…ç½®ï¼ˆ5åˆ†é’Ÿå®Œæˆï¼‰

### æ­¥éª¤ 1: é…ç½®äº‘å‡½æ•° HTTP è§¦å‘å™¨

1. **ç™»å½• TCB æ§åˆ¶å°**
   - åœ°å€: https://console.cloud.tencent.com/tcb
   - é€‰æ‹©ç¯å¢ƒ: `cloud1-4g2aaqb40446a63b`

2. **è¿›å…¥äº‘å‡½æ•°**
   - ä¾§è¾¹æ  â†’ äº‘å‡½æ•°
   - æ‰¾åˆ°å‡½æ•° `api`

3. **æ·»åŠ  HTTP è§¦å‘å™¨**
   - ç‚¹å‡»ã€Œæ–°å»ºè§¦å‘å™¨ã€
   - è§¦å‘å™¨ç±»å‹: **HTTP**
   - è¯·æ±‚æ–¹æ³•: **GET, POST, PUT, DELETE, OPTIONS, HEAD**
   - è·¯å¾„: `/api/{proxy+}` æˆ– `/api/*`
   - ä¿å­˜

4. **æŸ¥çœ‹è®¿é—®åœ°å€**
   - è§¦å‘å™¨ä¼šæ˜¾ç¤ºæ ¼å¼: `https://service-xxx.sh.run.tcloudbase.com/release/api`
   - è®°å½•æ­¤åœ°å€ä¾›åç»­ä½¿ç”¨

### æ­¥éª¤ 2: æ›´æ–° H5 é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰

å¦‚æœ H5 éœ€è¦è°ƒç”¨ä¸åŒçš„ API åœ°å€ï¼Œç¼–è¾‘:

```bash
packages/member-h5/.env
```

æ›´æ–°:
```
VITE_API_BASE_URL=https://service-xxx.sh.run.tcloudbase.com/release/api
```

ç„¶åé‡æ–°éƒ¨ç½²:
```bash
yarn workspace @rocketbird/member-h5 build
# ç„¶åæ‰‹åŠ¨ä¸Šä¼ åˆ° TCB é™æ€ç½‘ç«™æ‰˜ç®¡
```

### æ­¥éª¤ 3: æµ‹è¯•ç™»å½•

1. **æ‰“å¼€ H5 åº”ç”¨**
   - https://cloud1-4g2aaqb40446a63b-1390089965.tcloudbaseapp.com

2. **ä½¿ç”¨æµ‹è¯•è´¦å·ç™»å½•**
   - æ‰‹æœºå·: `13800000001` ~ `13800000005`
   - å¯†ç : `123456`

3. **å¦‚æœç™»å½•å¤±è´¥**
   - æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)
   - Network æ ‡ç­¾æŸ¥çœ‹ API è¯·æ±‚
   - ç¡®è®¤ API åŸºç¡€åœ°å€æ˜¯å¦æ­£ç¡®

---

## ğŸ“ æµ‹è¯•è´¦å·

| æ‰‹æœºå· | å¯†ç  | ç”¨é€” |
|--------|------|------|
| 13800000001 | 123456 | é€šç”¨æµ‹è¯• |
| 13800000002 | 123456 | é€šç”¨æµ‹è¯• |
| 13800000003 | 123456 | é€šç”¨æµ‹è¯• |
| 13800000004 | 123456 | é€šç”¨æµ‹è¯• |
| 13800000005 | 123456 | é€šç”¨æµ‹è¯• |

---

## ğŸ—„ï¸ æ•°æ®åº“é…ç½®

### åœ¨ TCB æ§åˆ¶å°æŸ¥çœ‹æ•°æ®

1. ç™»å½• TCB æ§åˆ¶å°
2. è¿›å…¥ã€Œæ•°æ®åº“ã€
3. å¯ä»¥çœ‹åˆ°æ‰€æœ‰è‡ªåŠ¨åˆ›å»ºçš„é›†åˆ:
   - `users` - ç”¨æˆ·è¡¨
   - `members` - ä¼šå‘˜è¡¨
   - `points_records` - ç§¯åˆ†è®°å½•
   - `levels` - ç­‰çº§é…ç½®
   - ç­‰ç­‰

### æ•°æ®åº“ç‰¹ç‚¹

âœ… **è‡ªåŠ¨åˆ›å»º**: é›†åˆåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶è‡ªåŠ¨åˆ›å»º
âœ… **è‡ªåŠ¨æ‰©å±•**: æ— éœ€æ‹…å¿ƒå®¹é‡
âœ… **è‡ªåŠ¨å¤‡ä»½**: TCB è‡ªåŠ¨å¤‡ä»½
âœ… **æƒé™æ§åˆ¶**: ä»…äº‘å‡½æ•°å¯ä»¥è®¿é—®

---

## ğŸ”Œ API æ¥å£åˆ—è¡¨

### è®¤è¯ç›¸å…³

```bash
# å¯†ç ç™»å½•
POST /api/auth/password-login
Body: { "phone": "13800000001", "password": "123456" }

# è·å–ä¸ªäººä¿¡æ¯
GET /api/auth/profile
Header: { "Authorization": "Bearer {token}" }

# æ›´æ–°ä¸ªäººä¿¡æ¯
PUT /api/auth/profile
Header: { "Authorization": "Bearer {token}" }
Body: { ...userInfo }
```

### ä¼šå‘˜ç›¸å…³

```bash
# è·å–ç­‰çº§ä¿¡æ¯
GET /api/level

# è·å–ç§¯åˆ†è®°å½•
GET /api/points

# è·å–ç­¾åˆ°è®°å½•
GET /api/checkin

# è·å–ä¼˜æƒ åˆ¸
GET /api/benefits

# è·å–æ¨èå…³ç³»
GET /api/referral
```

### ç®¡ç†åå°

```bash
# è·å–ä»ªè¡¨æ¿æ•°æ®
GET /api/admin/dashboard
```

---

## ğŸš€ éƒ¨ç½²å‘½ä»¤é€ŸæŸ¥

### é‡æ–°éƒ¨ç½²æ‰€æœ‰æœåŠ¡

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
bash scripts/deploy-tcb.sh -b all
```

### ä»…éƒ¨ç½²å‰ç«¯

```bash
# H5 ä¼šå‘˜ç«¯
bash scripts/deploy-tcb.sh -b h5

# ç®¡ç†åå°
bash scripts/deploy-tcb.sh -b admin

# ä¸¤è€…éƒ½éƒ¨ç½²
bash scripts/deploy-tcb.sh -b h5 && bash scripts/deploy-tcb.sh -b admin
```

### ä»…éƒ¨ç½²åç«¯

```bash
bash scripts/deploy-tcb.sh -b server
```

---

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ 1: ç™»å½•è¿”å› 404

**åŸå› **: API è·¯ç”±æœªé…ç½® HTTP è§¦å‘å™¨

**è§£å†³æ–¹æ¡ˆ**: æŒ‰ç…§ã€Œæ­¥éª¤ 1ã€é…ç½® HTTP è§¦å‘å™¨

### é—®é¢˜ 2: ç™»å½•è¿”å› 500

**åŸå› **: åç«¯ä»£ç é”™è¯¯æˆ–æ•°æ®åº“è¿æ¥é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**:
1. æŸ¥çœ‹äº‘å‡½æ•°æ—¥å¿— (TCB æ§åˆ¶å° > äº‘å‡½æ•° > api > æ—¥å¿—)
2. æ£€æŸ¥ç¯å¢ƒå˜é‡æ˜¯å¦æ­£ç¡®è®¾ç½®
3. ç¡®è®¤æ•°æ®åº“è¿æ¥æ­£å¸¸

### é—®é¢˜ 3: CORS é”™è¯¯

**åŸå› **: H5 è¯·æ±‚çš„ API åœ°å€å’Œå®é™…éƒ¨ç½²åœ°å€ä¸åŒ¹é…

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®è®¤ `packages/member-h5/.env` ä¸­çš„ `VITE_API_BASE_URL` æ˜¯å¦æ­£ç¡®
2. é‡æ–°æ„å»º H5: `yarn workspace @rocketbird/member-h5 build`
3. é‡æ–°éƒ¨ç½² H5 åˆ° TCB

### é—®é¢˜ 4: é¡µé¢æ‰“å¼€æ˜¾ç¤º 404

**åŸå› **: é™æ€ç½‘ç«™è·¯ç”±é…ç½®é—®é¢˜

**è§£å†³æ–¹æ¡ˆ**:
1. TCB æ§åˆ¶å° > é™æ€ç½‘ç«™æ‰˜ç®¡ > è®¾ç½®
2. æ‰¾åˆ°ã€Œé”™è¯¯é¡µé¢ã€è®¾ç½®
3. è®¾ç½®ä¸º `/index.html`

---

## ğŸ“Š æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TCB CloudBase (cloud1-4g2aaqb40446a63b)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ é™æ€ç½‘ç«™æ‰˜ç®¡                          â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ / â†’ H5 ä¼šå‘˜ç«¯ (index.html)            â”‚   â”‚
â”‚  â”‚ /admin â†’ ç®¡ç†åå° (index.html)       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ äº‘å‡½æ•°                                â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ api (Nodejs12.16)                     â”‚   â”‚
â”‚  â”‚  â”œâ”€ Express åº”ç”¨                      â”‚   â”‚
â”‚  â”‚  â”œâ”€ /api/* è·¯ç”±                       â”‚   â”‚
â”‚  â”‚  â””â”€ TCB Database SDK                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ æ–‡æ¡£å‹æ•°æ®åº“                         â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ collections:                         â”‚   â”‚
â”‚  â”‚  â”œâ”€ users                            â”‚   â”‚
â”‚  â”‚  â”œâ”€ members                          â”‚   â”‚
â”‚  â”‚  â”œâ”€ points_records                   â”‚   â”‚
â”‚  â”‚  â””â”€ ...                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ¨ æŠ€æœ¯æ ˆæ€»ç»“

| å±‚ | æŠ€æœ¯ | è¯´æ˜ |
|----|------|------|
| **å‰ç«¯** | uni-app + Vue3 | è·¨å¹³å° H5 åº”ç”¨ |
| **åç«¯ç®¡ç†åå°** | React + Vite | ç°ä»£åŒ–ç®¡ç†ç•Œé¢ |
| **API æœåŠ¡** | Express.js | Node.js Web æ¡†æ¶ |
| **æ•°æ®åº“** | TCB æ–‡æ¡£å‹DB | Firestore é£æ ¼ |
| **éƒ¨ç½²** | CloudBase | è…¾è®¯äº‘ä¸€ç«™å¼éƒ¨ç½² |
| **ç±»å‹æ£€æŸ¥** | TypeScript | å…¨æ ˆç±»å‹å®‰å…¨ |

---

## ğŸ“ åç»­æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜:

1. **æŸ¥çœ‹æ—¥å¿—**
   - TCB æ§åˆ¶å° > äº‘å‡½æ•° > api > æ—¥å¿—

2. **æ£€æŸ¥ç¯å¢ƒ**
   - ç¡®è®¤ TCB ç¯å¢ƒ ID: `cloud1-4g2aaqb40446a63b`
   - ç¡®è®¤æ‰€æœ‰éƒ¨ç½²æˆåŠŸæ— é”™è¯¯

3. **æ¸…é™¤ç¼“å­˜**
   - H5: Ctrl+Shift+Del æ¸…é™¤æµè§ˆå™¨ç¼“å­˜
   - é‡æ–°åˆ·æ–°é¡µé¢

4. **æŸ¥çœ‹æºä»£ç **
   - H5 API è°ƒç”¨: `packages/member-h5/src/utils/request.ts`
   - åç«¯è·¯ç”±: `packages/server/src/routes`
   - æ•°æ®åº“æ“ä½œ: `packages/server/src/utils/base-repository.ts`

---

**éƒ¨ç½²æ—¶é—´**: 2025-12-04  
**éƒ¨ç½²è€…**: GitHub Copilot  
**çŠ¶æ€**: âœ… åŸºæœ¬éƒ¨ç½²å®Œæˆï¼Œå¾…æ‰‹åŠ¨é…ç½®è§¦å‘å™¨

ç¥ä½ ä½¿ç”¨æ„‰å¿«! ğŸ‰
